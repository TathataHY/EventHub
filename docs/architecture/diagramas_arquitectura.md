# Diagramas de Arquitectura - EventHub

## Diagrama de Monorepo

```
┌─────────────────────────────────────────────────────────────┐
│                                                             │
│                        EventHub                             │
│                                                             │
└────────────────┬────────────────────┬───────────────────────┘
                 │                    │                  
    ┌────────────▼─────────┐ ┌────────▼─────────┐ ┌────────────▼─────────┐
    │                      │ │                  │ │                      │
    │   eventhub-shared    │ │   eventhub-api   │ │   eventhub-mobile    │
    │                      │ │                  │ │                      │
    └──────────┬───────────┘ └──────────────────┘ └──────────────────────┘
               │                      │                     │
               ▼                      ▼                     ▼
    ┌─────────────────────┐ ┌─────────────────────┐ ┌─────────────────────┐
    │                     │ │                     │ │                     │
    │   Tipos compartidos │ │    API NestJS       │ │   App Expo/React    │
    │                     │ │                     │ │       Native        │
    └─────────────────────┘ └─────────────────────┘ └─────────────────────┘
                                      │                      │
                                      │                      │
                                      ▼                      ▼
                             ┌─────────────────┐   ┌──────────────────┐
                             │                 │   │                  │
                             │   MySQL 8.0     │   │   Expo Router    │
                             │                 │   │                  │
                             └─────────────────┘   └──────────────────┘
```

## Diagrama de Clean Architecture

```
┌─────────────────────────────────────────────────────────────┐
│                                                             │
│                     Capa de Presentación                    │
│          (eventhub-api/presentation, app/ en mobile)        │
│  ┌─────────────┐   ┌─────────────┐   ┌─────────────────┐   │
│  │             │   │             │   │                 │   │
│  │ Controllers │   │ Middlewares │   │    Components   │   │
│  │             │   │             │   │                 │   │
│  └─────────────┘   └─────────────┘   └─────────────────┘   │
│                                                             │
└────────────────────────────┬────────────────────────────────┘
                             │
┌────────────────────────────▼────────────────────────────────┐
│                                                             │
│                   Capa de Aplicación                        │
│                   (eventhub-api/application)                │
│  ┌─────────────┐   ┌─────────────┐   ┌─────────────────┐   │
│  │             │   │             │   │                 │   │
│  │  Use Cases  │   │    DTOs     │   │     Mappers     │   │
│  │             │   │             │   │                 │   │
│  └─────────────┘   └─────────────┘   └─────────────────┘   │
│                                                             │
└────────────────────────────┬────────────────────────────────┘
                             │
┌────────────────────────────▼────────────────────────────────┐
│                                                             │
│                   Capa de Dominio                           │
│                   (eventhub-api/domain)                     │
│  ┌─────────────┐   ┌─────────────┐   ┌─────────────────┐   │
│  │             │   │             │   │                 │   │
│  │  Entities   │   │ Value Objects│  │     Interfaces  │   │
│  │             │   │             │   │                 │   │
│  └─────────────┘   └─────────────┘   └─────────────────┘   │
│                                                             │
└────────────────────────────┬────────────────────────────────┘
                             │
┌────────────────────────────▼────────────────────────────────┐
│                                                             │
│                 Capa de Infraestructura                     │
│                 (eventhub-api/infrastructure)               │
│  ┌─────────────┐   ┌─────────────┐   ┌─────────────────┐   │
│  │             │   │             │   │                 │   │
│  │ Repositories│   │   External  │   │   TypeORM &     │   │
│  │             │   │    APIs     │   │    Services     │   │
│  └─────────────┘   └─────────────┘   └─────────────────┘   │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

## Diagrama de Flujo de Datos (Backend)

```
┌───────────────┐     ┌───────────────┐     ┌───────────────┐
│               │     │               │     │               │
│    Cliente    │ ──► │  Controller   │ ──► │   Use Case    │
│               │     │               │     │               │
└───────────────┘     └───────────────┘     └───────┬───────┘
        ▲                                           │
        │                                           ▼
┌───────┴───────┐     ┌───────────────┐     ┌───────────────┐
│               │     │               │     │               │
│  Presentador  │ ◄── │  Repository   │ ◄── │     Entity    │
│               │     │               │     │               │
└───────────────┘     └───────────────┘     └───────────────┘
                              │
                              ▼
                      ┌───────────────┐
                      │               │
                      │   Database    │
                      │               │
                      └───────────────┘
```

## Diagrama de Flujo de Datos (Frontend Mobile)

```
┌───────────────┐     ┌───────────────┐     ┌───────────────┐
│               │     │               │     │               │
│  Component    │ ──► │    Hook       │ ──► │   Repository  │
│               │     │               │     │               │
└───────────────┘     └───────────────┘     └───────┬───────┘
        ▲                                           │
        │                                           ▼
┌───────┴───────┐                          ┌───────────────┐
│               │                          │               │
│ State Context │ ◄────────────────────── │     API       │
│               │                          │               │
└───────────────┘                          └───────────────┘
```

## Diagrama de Navegación con Expo Router

```
                  ┌───────────────┐
                  │               │
                  │   _layout.js  │
                  │               │
                  └───────┬───────┘
                          │
          ┌───────────────┼───────────────┐
          │               │               │
┌─────────▼────────┐ ┌────▼────┐  ┌───────▼────────┐
│                  │ │         │  │                │
│   (auth)         │ │ index.js│  │    (tabs)      │
│                  │ │         │  │                │
└──┬─────────────┬─┘ └─────────┘  └─┬──────────────┘
   │             │                  │
┌──▼────┐   ┌────▼───┐        ┌────▼────┐    ┌─────────┐ 
│       │   │        │        │         │    │         │ 
│login.js│   │register│        │  _layout │   │  home.js│ 
│       │   │.js     │        │         │    │         │ 
└───────┘   └────────┘        └────┬────┘    └─────────┘ 
                                   │               
                              ┌────▼────┐    ┌─────────┐ 
                              │         │    │         │ 
                              │search.js│    │events/  │ 
                              │         │    │         │ 
                              └─────────┘    └────┬────┘
                                                  │
                                   ┌──────────────┼──────────────┐
                                   │              │              │
                              ┌────▼────┐    ┌────▼───┐    ┌────▼────┐
                              │         │    │        │    │         │
                              │ [id].js │    │create.js│    │edit/    │
                              │         │    │        │    │         │
                              └─────────┘    └────────┘    └─────────┘
```

## Modelo de Datos Simplificado

```
┌───────────────┐      ┌───────────────┐       ┌───────────────┐
│               │1    *│               │*     1│               │
│     Users     │◄─────│    Events     │─────►│  Categories    │
│               │      │               │       │               │
└─┬─────────────┘      └─┬────────┬────┘       └───────────────┘
  │                      │        │
  │                      │        │
  │                      │        │
┌─▼──────────────┐     ┌─▼────────▼────┐       ┌───────────────┐
│                │1   *│                │*     1│               │
│    Payments    │◄────│  Attendances   │─────►│    Tickets    │
│                │     │                │       │               │
└────────────────┘     └─┬──────────────┘       └───────────────┘
                         │
                         │
                         │
           ┌─────────────┤
           │             │
┌──────────▼─────┐     ┌─▼────────────┐       ┌───────────────┐
│               │*    *│              │*     *│               │
│   Comments    │◄─────│    Groups    │─────►│  GroupMembers  │
│               │      │              │       │               │
└───────────────┘      └──────────────┘       └───────────────┘
``` 